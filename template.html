<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>
		
	</title>
	<script src="./libraries/babel.min.js"></script>
	<script src="./libraries/react.development.js"></script>
	<script src="./libraries/react-dom.development.js"></script>
	
	<!-- redux https://unpkg.com/redux@4.2.0/dist/redux.js -->
	<script src="./libraries/redux.js"></script>
	
	<!-- react-redux https://cdnjs.cloudflare.com/ajax/libs/react-redux/8.0.5/react-redux.js -->
	<script src="./libraries/react-redux.js"></script>
	
	<!-- font awesome icons -->
	<link href='./libraries/css/all.css' rel='stylesheet'>

	
	
	
	<style>
		body{
			margin: 0;
		}
		*{
			outline:2px solid black;
			font-family: 'Lucida Consolas', monospace, 'Tahoma', sans-serif;
			color: black
		}
		button{
			cursor:pointer;
		}
		button:hover{
			
			filter: brightness(1.5);
		}
	</style>
</head>
  
<body>
	<main>
		<div id="react-container-1" class="react-container">
		
		<div>
	</main>
	
	<script type="text/babel">
		//------------------------------- actions -------------------------------//

		//------------------------------- new state -------------------------------//
		const state0={
			'display':'0',
			'button-brightness':1
					
		}
		
		//state & return new state
		const reducer=(state={...state0}, action)=>{
			const newState={...state};
			
			switch(action.type){
				case 'num-button-click':
					const {info:value}= action;
					
					newState['display']=value;
					return newState;

				
				default:
					return newState;
				}

		}
		//--------------------------- map state to props ---------------------------//
		//which parts of state to access
		const mapStateToProps= state=>(state);
		//--------------------------- map state to props ---------------------------//
		//
		const mapDispatchToProps= dispatchFunction=>({
			'do-num-button-click': (event,text)=>dispatchFunction({type:'num-button-click', info:text}),
			'do-button-hover': event=>dispatchFunction({type:'button-hover',target:event.target}),
			'do-button-leave': event=>dispatchFunction({type:'button-mouse-leave',target:event.target}),
		});
		//react component Provider
		const Provider = ReactRedux.Provider;
		//connect function
		const connect= ReactRedux.connect;
		//store i.e. STATE object
		const store= Redux.createStore(reducer);
		//--------------------------- Button ---------------------------//
		const Button= props=> {
			const {text,button}=props;

			const style={
				'background-color':'teal',
				'padding': '1rem',
				'font-size': '1rem',
				'border':'0.1rem solid black',
				/*simuate button hover effect*/
				...props.style,
			};
			return <button style={style} onClick={e=>button['do-num-button-click'](e,text)}>
				{text}
			</button>;
		};
		//--------------------------- Display ---------------------------//
		const Display= props=> {
			const {text}=props;
			
			const style={
				'grid-column':'1/4',
				'display':'grid',
				'grid-template-columns':'9fr 1fr',
				'place-items':'stretch',
				'align-self':'stretch',
				'justify-self':'stretch',
				'font-size': '1rem',
				...props.style,
			};
			return <div style={style}>
				<div>{text}</div>
				<i className="fa-solid fa-delete-left"></i>
			</div>;
		};
		//--------------------------- Control ---------------------------//
		const Control= props=> {
			const {text,button}=props;
			
			const style={
				...props.style,
				/*width:'50%',*/
				display:'grid',
				'grid-template-columns':'repeat(3,minmax(0,1fr))',
			};
			const countStyle={
				'font-size': '2rem'
			};
			const buttonStyle={
				'padding': '2em',
				...countStyle
			};

			const array='1-2-3-4-5-6-7-8-9-0-.'.split('-').map(s=>
				<Button text={s} button={button}/>
			);
			return (
			<div style={style}>
				<Display text={text}/>
				{array}
			</div>);
		};

		//--------------------------- App ---------------------------//
		//component App WITHOUT LOCAL STATE
		class App extends React.Component{
			constructor(props){
				super(props);
			
			}
			render(){
				const headerFooterStyle={
					'text-align':'center',
					'font-weight':'bold'
				};
				const style= {
					'display':'grid',
					'grid-template-rows': '0.5fr 1fr 0.5fr',
					/**/
					'align-items':'center',
					'justify-items':'center',
					/**/
					'background-color': 'wheat',
					'height': '100vh'
				};
				const button={
					...this.props
				};
				return (
				<div style={style}>
					<h1 style={headerFooterStyle}>React Redux JS Calculator</h1>
					
					<Control text={this.props['display']} 
					button={button}/>
					
					<footer style={headerFooterStyle}><p>by Abdullah Fatota</p></footer>
				</div>);
			}
		}
		//--------------------------- App2 ---------------------------//
		const App2= connect(mapStateToProps, mapDispatchToProps)(App);
		
		//--------------------------- AppWrapper ---------------------------//
		//react componentAppWrapper
		class AppWrapper extends React.Component{
			constructor(props){
				super(props);		
			}
			render(){
				//store prop IS REQUIRED.
				return (<Provider store={store}>
					<App2/>
				</Provider>);
			}
		}
	
		//--------------------------- attach AppWrapper to document ---------------------------//
		const container=document.querySelector('#react-container-1');
		ReactDOM.render(<AppWrapper/>,container);

	</script>
	
	<!-- free code camp test suite -->
	<script src="./libraries/test bundle.js"></script>

	
</body>

</html>